C51 COMPILER V9.60.7.0   MAIN                                                              05/29/2024 17:22:03 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c LARGE WARNINGLEVEL(1) OPTIMIZE(9,SIZE) BROWSE DEBUG OBJECTEXTEND 
                    -PRINT(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "reg52.h"
   2          #include "oled.h"
   3          //#include "bmp.h"
   4          #include "dht11.h"
   5          #include "ds1302.h"
   6          #include "keyscan.h"
   7          #include "mp3.h"
   8          #include "alarm.h"
   9          #include "settings.h"
  10          #include "delay.h"
  11          #include "lunar.h"
  12          
  13          Sensor sensor;
  14          Alarm alarm;
  15          
  16          unsigned char str[] = {0,1,2,3,4};
  17          char dht11_to_show[8];
  18          uchar hour_type = 24;
  19          
  20          void function1(){
  21   1        if(hour_type == 12) hour_type = 24;
  22   1        else if(hour_type == 24) hour_type = 12;
  23   1      }
  24          
  25          void function2(){
  26   1        uchar selection = 0;
  27   1        OLED_Clear();
  28   1        while(1){
  29   2          OLED_ShowString(22,0,"Alarm",16);
  30   2          OLED_ShowString(22,2,"Music",16);
  31   2          OLED_ShowString(22,4,"Weather",16);
  32   2          OLED_ShowString(22,6,"Settings",16);
  33   2          OLED_ShowChar(16,selection*2,'>',16);
  34   2          if(getKey() == 1){
  35   3            OLED_ShowChar(16,selection*2,' ',16);
  36   3            if(selection == 0) selection = 3;
  37   3            else selection -= 1;
  38   3          }
  39   2          else if(getKey() == 2){
  40   3            OLED_ShowChar(16,selection*2,' ',16);
  41   3            if(selection == 3) selection = 0;
  42   3            else selection += 1;
  43   3          }
  44   2          else if(getKey() == 3){
  45   3            OLED_Clear();
  46   3            break;
  47   3          }
  48   2          else if(getKey() == 4){
  49   3            switch(selection){
  50   4              case 0: {page_alarm(); break;}
  51   4              case 1: {page_music(); break;}
  52   4              case 2: {/*page_weather();*/ break;}
  53   4              case 3: {page_settings(); break;}
  54   4              default: break;
C51 COMPILER V9.60.7.0   MAIN                                                              05/29/2024 17:22:03 PAGE 2   

  55   4            }
  56   3          }
  57   2        }
  58   1      }
  59          
  60          void function3(){
  61   1        
  62   1      }
  63          
  64          void function4(){
  65   1        
  66   1      }
  67          
  68          /*******************************Main*******************************/
  69          void main(){
  70   1        Delay_50ms(1);//等待系统稳定
  71   1        ds1302_init();  //DS1302初始化
  72   1        OLED_Init();
  73   1        OLED_Display_On();
  74   1        OLED_Clear();
  75   1        OLED_Clear();
  76   1        alarm_init();
  77   1        while(1){
  78   2          print_time_now(20,2,hour_type);
  79   2          print_date_now(0,4);
  80   2          print_lunar_now(0,0);
  81   2          print_solar_term_now(80,0);
  82   2          getdata((uchar *)&sensor);
  83   2          dht11_to_show[0] = (char)(sensor.temper / 10 + '0');
  84   2          dht11_to_show[1] = (char)(sensor.temper % 10 + '0');
  85   2          dht11_to_show[2] = 'C';
  86   2          dht11_to_show[3] = ' ';
  87   2          dht11_to_show[4] = (char)(sensor.humid / 10 + '0');
  88   2          dht11_to_show[5] = (char)(sensor.humid % 10 + '0');
  89   2          dht11_to_show[6] = '%';
  90   2          dht11_to_show[7] = 0;
  91   2          OLED_ShowString(20,6, dht11_to_show,16);
  92   2          switch(getKey()){
  93   3            case 1: {function1(); break;}
  94   3            case 2: {function2(); break;}
  95   3            case 3: {function3(); break;}
  96   3            case 4: {function4(); break;}
  97   3            default: break;
  98   3          }
  99   2          alarm_tick_tock();
 100   2        }
 101   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    432    ----
   CONSTANT SIZE    =     29    ----
   XDATA SIZE       =     20       1
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
