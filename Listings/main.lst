C51 COMPILER V9.60.7.0   MAIN                                                              05/29/2024 21:24:33 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c LARGE WARNINGLEVEL(1) OPTIMIZE(9,SIZE) BROWSE DEBUG OBJECTEXTEND 
                    -PRINT(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "reg52.h"
   2          #include "oled.h"
   3          //#include "bmp.h"
   4          #include "dht11.h"
   5          #include "ds1302.h"
   6          #include "keyscan.h"
   7          #include "mp3.h"
   8          #include "alarm.h"
   9          #include "settings.h"
  10          #include "delay.h"
  11          #include "lunar.h"
  12          #include "mq2.h"
  13          
  14          Sensor sensor;
  15          Alarm alarm;
  16          
  17          unsigned char str[] = {0,1,2,3,4};
  18          char dht11_to_show[8];
  19          uchar hour_type = 24;
  20          
  21          void function1(){
  22   1        if(hour_type == 12) hour_type = 24;
  23   1        else if(hour_type == 24) hour_type = 12;
  24   1      }
  25          
  26          void function2(){
  27   1        uchar selection = 0;
  28   1        OLED_Clear();
  29   1        while(1){
  30   2          OLED_ShowString(22,0,"Alarm",16);
  31   2          OLED_ShowString(22,2,"Music",16);
  32   2          OLED_ShowString(22,4,"Weather",16);
  33   2          OLED_ShowString(22,6,"Settings",16);
  34   2          OLED_ShowChar(16,selection*2,'>',16);
  35   2          if(getKey() == 1){
  36   3            OLED_ShowChar(16,selection*2,' ',16);
  37   3            if(selection == 0) selection = 3;
  38   3            else selection -= 1;
  39   3          }
  40   2          else if(getKey() == 2){
  41   3            OLED_ShowChar(16,selection*2,' ',16);
  42   3            if(selection == 3) selection = 0;
  43   3            else selection += 1;
  44   3          }
  45   2          else if(getKey() == 3){
  46   3            OLED_Clear();
  47   3            break;
  48   3          }
  49   2          else if(getKey() == 4){
  50   3            switch(selection){
  51   4              case 0: {page_alarm(); break;}
  52   4              case 1: {page_music(); break;}
  53   4              case 2: {/*page_weather();*/ break;}
  54   4              case 3: {page_settings(); break;}
C51 COMPILER V9.60.7.0   MAIN                                                              05/29/2024 21:24:33 PAGE 2   

  55   4              default: break;
  56   4            }
  57   3          }
  58   2        }
  59   1      }
  60          
  61          void function3(){
  62   1        
  63   1      }
  64          
  65          void function4(){
  66   1        
  67   1      }
  68          
  69          /*******************************Main*******************************/
  70          void main(){
  71   1        Delay_50ms(1);//等待系统稳定
  72   1        ds1302_init();  //DS1302初始化
  73   1        OLED_Init();
  74   1        OLED_Display_On();
  75   1        OLED_Clear();
  76   1        OLED_Clear();
  77   1        alarm_init();
  78   1        while(1){
  79   2          print_time_now(20,2,hour_type);
  80   2          print_date_now(0,4);
  81   2          print_lunar_now(0,0);
  82   2          print_solar_term_now(80,0);
  83   2          getdata((uchar *)&sensor);
  84   2          dht11_to_show[0] = (char)(sensor.temper / 10 + '0');
  85   2          dht11_to_show[1] = (char)(sensor.temper % 10 + '0');
  86   2          dht11_to_show[2] = 'C';
  87   2          dht11_to_show[3] = ' ';
  88   2          dht11_to_show[4] = (char)(sensor.humid / 10 + '0');
  89   2          dht11_to_show[5] = (char)(sensor.humid % 10 + '0');
  90   2          dht11_to_show[6] = '%';
  91   2          dht11_to_show[7] = 0;
  92   2          OLED_ShowString(20,6, dht11_to_show,16);
  93   2          switch(getKey()){
  94   3            case 1: {function1(); break;}
  95   3            case 2: {function2(); break;}
  96   3            case 3: {function3(); break;}
  97   3            case 4: {function4(); break;}
  98   3            default: break;
  99   3          }
 100   2          alarm_tick_tock();
 101   2          mq2_tick_tock();
 102   2        }
 103   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    435    ----
   CONSTANT SIZE    =     29    ----
   XDATA SIZE       =     20       1
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
